---
page_title: "morpheus_vsphere_instance Resource - terraform-provider-morpheus"
subcategory: ""
description: |-
  Provides a Morpheus instance resource.
---

# morpheus_vsphere_instance

Provides a Morpheus instance resource.

## Example Usage

```terraform
data "morpheus_group" "morpheus_lab" {
  name = "MORPHEUS"
}

data "morpheus_cloud" "morpheus_vsphere" {
  name = "MORPHEUSVCENTER"
}

data "morpheus_resource_pool" "vsphere_resource_pool" {
  name     = "Morpheus-Cluster"
  cloud_id = data.morpheus_cloud.vsphere.id
}

data "morpheus_instance_type" "apache" {
  name = "apache"
}

data "morpheus_instance_layout" "apache" {
  name = "Apache"
}

data "morpheus_network" "vmnetwork" {
  name = "VM Network"
}

data "morpheus_plan" "vmware" {
  name = "1 CPU, 4GB Memory"
}

resource "morpheus_vsphere_instance" "tf_example_vsphere_instance" {
  name               = "tfvsphere"
  description        = "Terraform instance example"
  cloud_id           = data.morpheus_cloud.morpheus_vsphere.id
  group_id           = data.morpheus_group.morpheus_lab.id
  instance_type_id   = data.morpheus_instance_type.apache.id
  instance_layout_id = data.morpheus_instance_layout.apache.id
  plan_id            = data.morpheus_plan.vmware.id
  environment        = "dev"
  resource_pool_id   = data.morpheus_resource_pool.vsphere_resource_pool.id
  labels             = ["demo", "terraform"]

  interfaces {
    network_id = data.morpheus_network.vmnetwork.id
  }

  tags = {
    name = "apachetf"
  }

  evar {
    name   = "application"
    value  = "demo"
    export = true
    masked = true
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cloud_id` (Number) The ID of the cloud associated with the instance
- `group_id` (Number) The ID of the group associated with the instance
- `instance_layout_id` (Number) The layout to provision the instance from
- `instance_type_id` (Number) The type of instance to provision
- `plan_id` (Number) The service plan associated with the instance

### Optional

- `asset_tag` (String) The asset tag associated with the instance
- `create_user` (Boolean) Whether to create a user account on the instance that is associated with the provisioning user account
- `description` (String) The user friendly description of the instance
- `environment` (String) The environment to assign the instance to
- `evar` (Block List) The environment variables to create (see [below for nested schema](#nestedblock--evar))
- `interfaces` (Block List) The instance network interfaces to create (see [below for nested schema](#nestedblock--interfaces))
- `labels` (List of String) The list of labels to add to the instance
- `name` (String) The name of the instance
- `resource_pool_id` (Number) The ID of the resource pool to provision the instance to
- `skip_agent_install` (Boolean) Whether to skip installation of the Morpheus agent
- `tags` (Map of String) Tags to assign to the instance
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- `volumes` (Block List) The instance volumes to create (see [below for nested schema](#nestedblock--volumes))
- `workflow_id` (Number) The ID of the provisioning workflow to execute (`workflow_name` can be used alternatively, only one is needed)
- `workflow_name` (String) The name of the provisioning workflow to execute (`workflow_id` can be used alternatively, only one is needed)

### Read-Only

- `id` (String) The ID of the instance

<a id="nestedblock--evar"></a>
### Nested Schema for `evar`

Optional:

- `export` (Boolean) Whether the environment variable is exported as an instance tag
- `masked` (Boolean) Whether the environment variable is masked for security purposes
- `name` (String) The name of the environment variable
- `value` (String) The value of the environment variable


<a id="nestedblock--interfaces"></a>
### Nested Schema for `interfaces`

Optional:

- `ip_address` (String)
- `ip_mode` (String)
- `network_id` (Number) The network to assign the network interface to
- `network_interface_type_id` (Number) The network interface type


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `read` (String)
- `update` (String)


<a id="nestedblock--volumes"></a>
### Nested Schema for `volumes`

Optional:

- `datastore_id` (Number) The ID of the datastore
- `name` (String) The name/type of the LV being created
- `root` (Boolean) Whether the volume is the root volume of the instance
- `size` (Number) The size of the LV being created
- `size_id` (Number) The ID of an existing LV to assign to the instance
- `storage_type` (Number) The ID of the LV type

## Import

Import is supported using the following syntax:

```shell
terraform import morpheus_vsphere_instance.tf_example_vsphere_instance 1
```
